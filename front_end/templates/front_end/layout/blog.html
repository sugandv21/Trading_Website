{% extends "front_end/layout/base.html" %}
{% load static %}
{% block title %}Blog{% endblock %}

{% block content %}
<!-- ================= BLOG HERO SECTION ================= -->
<section class="blog-hero py-5">
  <div class="container">
   <div class="row align-items-start g-5">

  <!-- Left Content -->
  <div class="col-lg-7 text-center my-5">
    <h2 class="fw-bold mt-lg-5">{{ hero.title|default:"Don’t Just Gain info" }}</h2>
    <h2 class="fw-bold text-neon">{{ hero.subtitle|default:"Build Knowledge" }}</h2>
    <p class="mt-3 fs-5 px-5">
      {{ hero.description|default:"Whether you’re a new investor or a market expert, we’ve got something for everyone at the TRACO blog" }}
    </p>
  </div>

  <!-- Right Image -->
  <div class="col-lg-3 text-lg-start text-center position-relative ms-lg-5">
    <div class="oval-wrapper position-relative">
      {% if hero.image %}
        <img src="{{ hero.image.url }}" alt="{{ hero.subtitle }}" class="ceo-img">
      {% else %}
        <img src="{% static 'images/ceo.png' %}" alt="CEO" class="ceo-img">
      {% endif %}

      {% if hero.sparkle %}
        <img src="{{ hero.sparkle.url }}" alt="Sparkle" class="sparkle sparkle-top">
        <img src="{{ hero.sparkle.url }}" alt="Sparkle" class="sparkle sparkle-bottom">
      {% endif %}
    </div>
  </div>

</div>

  </div>
</section>

<!-- ================= BLOG TABS ================= -->
<section class="blog-tabs-section py-5">
<ul class="nav nav-pills rounded-pill border border-success d-flex mb-4 flex-wrap mx-auto" 
    id="blogTab" role="tablist"
    style="width:90%;">

    
  {% for tab in tabs %}
    <li class="nav-item flex-fill" role="presentation">
      <button 
        class="nav-link w-100 fw-bold {% if forloop.first %}active{% endif %}" 
        id="tab-{{ tab.tab_key }}" 
        data-bs-toggle="pill" 
        data-bs-target="#content-{{ tab.tab_key }}" 
        type="button" 
        role="tab">
        {{ tab.get_tab_key_display }}
      </button>
    </li>
  {% endfor %}
</ul>

<!-- Tab Content -->
<div class="tab-content" id="blogTabContent">
  {% for tab in tabs %}
    <div class="tab-pane fade {% if forloop.first %}show active{% endif %}" 
         id="content-{{ tab.tab_key }}" role="tabpanel">

      <!-- Add margin and reduced width -->
      <div class="container my-4" style="max-width: 90%; margin-left: auto; margin-right: auto;">
        <div class="row g-5 justify-content-center">
          {% for post in posts %}
            {% if post.category == tab.tab_key %}
              <div class="col-md-4 col-sm-6">
                <div class="card h-100 shadow-sm border-0 rounded-4 overflow-hidden position-relative" style="height: 420px;">
                  {% if post.image %}
                    <img src="{{ post.image.url }}" class="card-img-top" alt="{{ post.title }}" style="height: 280px; object-fit: cover;">
                  {% endif %}
                  
                  <!-- Title overlay on image -->
                  <div class="card-img-overlay d-flex align-items-start p-3">
                    <h6 class="fw-bold text-dark bg-white bg-opacity-75 px-2 py-1 rounded">
                      {{ post.title }}
                    </h6>
                  </div>

                  <!-- Body -->
                  <div class="card-body bg-white text-center fs-5">
                    <small class="text-muted d-block mb-2">
                      {{ post.read_time }} • {{ post.date|date:"d M Y" }}
                    </small>
                    <p class="mb-0">{{ post.short_desc|linebreaksbr }}</p>
                  </div>
                </div>
              </div>
            {% endif %}
          {% endfor %}
        </div>
      </div>

    </div>
  {% endfor %}
</div>


</section>


<style>
.blog-hero {
  background: #0b0f0c;
  color: white;
}

.text-neon {
  color: #c4ff00;
}

/* Oval neon wrapper */
.oval-wrapper {
  border: 3px solid #c4ff00;
  border-radius: 50% ;  
  padding: 15px;
  display: inline-block;
  position: relative;
  box-shadow: 0 0 20px #c4ff00, 0 0 40px #c4ff00; /* neon glow */
}

.ceo-img {
  border-radius: 50% ; 
  width: 280px;
  height: 380px;
  object-fit: cover;
}

.sparkle {
  position: absolute;
  width: 40px;
  height: 40px;
  z-index: 5;
  animation: spin 6s linear infinite, pulse 2s ease-in-out infinite;
}

.sparkle-top {
  top: 50px;
  right: 2px;
}

.sparkle-bottom {
  bottom: 20px;
  left: 30px;
}

@keyframes spin {
  0%   { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes pulse {
  0%, 100% { transform: scale(1); opacity: 1; }
  50%      { transform: scale(1.2); opacity: 0.8; }
}

@media (max-width: 768px) {
  .ceo-img {
    width: 200px;
    height: 280px;
  }
  .sparkle {
    width: 25px;
    height: 25px;
  }
}



.blog-tabs-section .nav-pills .nav-link {
  border-radius: 0;
  color: #c4ff00; 
}

.blog-tabs-section .nav-pills .nav-link.active {
  background: #ddd; 
  color: black;
  border-radius: 100px;
}


.card {
  border-radius: 20px;
}

.card img {
  height: 200px;
  object-fit: cover;
}


.card-img-overlay {
  top: 10px;
  left: 50%;
  transform: translateX(-50%);
  text-align: center;
}
.card-img-overlay h6 {
  color: #000;
  font-weight: bold;
  background: rgba(255,255,255,0.8);
  padding: 6px 12px;
  border-radius: 8px;
}



</style>



{% endblock %}